"use strict";var app=angular.module("app.directives",["ngAnimate"]);app.directive("shakeThat",["$animate",function(a){return{require:"^form",scope:{submit:"&",submitted:"="},link:function(d,c,b,e){c.on("submit",function(){d.$apply(function(){if(e.$valid){return d.submit()}d.submitted=true;a.addClass(c,"shake").then(function(){a.removeClass(c,"shake")})})})}}}]);app.directive("uppercase",function(){return{require:"ngModel",link:function(e,c,b,d){var a=function(f){if(f){var g=f.toUpperCase();if(g!==f){d.$setViewValue(g);d.$render()}return g}};d.$parsers.push(a);a(e[b.ngModel])}}});app.directive("lowercase",function(){return{require:"ngModel",link:function(e,c,b,d){var a=function(f){if(f){var g=f.toLowerCase();if(g!==f){d.$setViewValue(g);d.$render()}return g}};d.$parsers.push(a);a(e[b.ngModel])}}});app.directive("capitalize",function(){return{require:"ngModel",link:function(e,c,a,d){var b=function(f){if(f){var g=f.split(" ");if(g.length>0){var h="";angular.forEach(g,function(j,i){if(h!==""){h+=" "}h+=j.charAt(0).toUpperCase()+j.substring(1)});if(h!==f){d.$setViewValue(h);d.$render()}return h}}};d.$parsers.push(b);b(e[a.ngModel])}}});app.directive("capitalizeFirst",function(){return{require:"ngModel",link:function(e,c,a,d){var b=function(f){if(f){var g=f.charAt(0).toUpperCase()+f.substring(1);if(g!==f){d.$setViewValue(g);d.$render()}return g}};d.$parsers.push(b);b(e[a.ngModel])}}});app.directive("currency",function(){return{restrict:"A",require:"ngModel",link:function(d,c,b,a){var e=function(h,g){if(g===undefined){g=false}h=h.toString();h=h.replace(/[^0-9]/g,"");if(h.length===0||h.length<=2){return h}h=h.substring(0,h.length-2)+","+h.substring(h.length-2);h=h.replace(/[^0-9\,]/g,"");var i=h.split(",");i[0]=i[0].replace(/\d{1,3}(?=(\d{3})+(?!\d))/g,"$&.");if(i[1]&&i[1].length>2){i[1]=i[1].substring(0,2)}if(g&&i[1]&&(i[1].length===1)){i[1]=i[1]+"0"}return i.join(i.length===1?"":",")};var f=function(){var h=c.val();var g=h;if(!h||h.length===0){return}h=e(h);if(h!==g){c.val(h);c.triggerHandler("input")}};c.bind("keyup keydown keypress",function(i){var g=i.keyCode;if(g>64&&g<91){return false}var h=(g>47&&g<58)||g===32||g===8||(g>95&&g<112)||(g>185&&g<193)||(g>218&&g<223);if(h){f()}});a.$parsers.push(function(g){if(!g||g.length===0){return g}g=g.toString();g=g.replace(/[^0-9]/g,"");return g});a.$formatters.push(function(g){if(!g||g.length===0){return g}g=e(g,true);return g})}}});app.directive("onlyNumeric",function(){return{require:"ngModel",link:function(d,b,a,c){c.$parsers.push(function(e){if(e==undefined){return""}var f=e.replace(/[^0-9]/g,"");if(f!=e){c.$setViewValue(f);c.$render()}return f})}}});app.directive("onlyAlfa",function(){return{require:"ngModel",link:function(d,b,a,c){c.$parsers.push(function(e){if(e==undefined){return""}var f=e.replace(/[0-9]/g,"");if(f!=e){c.$setViewValue(f);c.$render()}return f})}}});app.directive("focusMe",["$timeout","$parse",function(a,b){return{link:function(f,e,d){var c=b(d.focusMe);f.$watch(c,function(g){if(g===true){a(function(){e[0].focus()},100)}});e.bind("blur",function(){f.$apply(c.assign(f,false))})}}}]);app.directive("starRating",["$timeout",function(a){return{restrict:"EA",template:'<ul class="rating" ng-class="{readonly: readonly}">  <li ng-repeat="star in stars" ng-class="star" ng-click="toggle($index)">    <i class="fa fa-star"></i>  </li></ul>',scope:{ratingValue:"=ngModel",max:"=?",onSelect:"&?",readonly:"=?"},link:function(d,e,b){if(d.max===undefined){d.max=5}function c(){d.stars=[];for(var g=0,f=d.max;g<f;++g){d.stars.push({filled:g<d.ratingValue})}}d.toggle=function(f){if(d.readonly===undefined||d.readonly===false){d.ratingValue=f+1;d.onSelect({rating:f+1})}};d.$watch("ratingValue",function(f,g){c()});c()}}}]);