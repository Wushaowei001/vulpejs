application.ng.base.controller("LoginController",["$rootScope","$scope","$http","$timeout","$messages","$authenticator","$window","$cookies","$store",function(e,r,s,o,n,t,u,a,i){$("#custom").html(""),r.user={username:"",password:"",rememberMe:!1},t.logoutSuccessfully(),i.get("remember")?r.user=JSON.parse(i.get("remember")):a.remember&&(r.user=JSON.parse(a.remember.substring(2)),r.user.rememberMe=!0),r.login=function(){r.form.$valid?(n.cleanAllMessages(),r.user.rememberMe?i.set("remember",JSON.stringify(r.user)):i.remove("remember"),s.post(vulpe.ng.rootContext+"/login",r.user).success(function(e){n.addSuccessMessage("Successfully logged in!"),t.loginSuccessfully(e.user),u.location=e.redirectTo}).error(function(e,r){n.addErrorMessage(403===r?"Informed credential is invalid.":"An error occurred in the execution.")})):$(0===r.user.username.length?"#loginUsername":"#loginPassword").focus()},r.forgotPassword=function(){r.user.username&&r.user.username.length>0?u.location=vulpe.ng.rootContext+"/forgot-password/"+r.user.username:(n.addErrorMessage("Please enter your e-mail password reset."),$("#loginUsername").focus())},$(document).ready(function(){$("#login").addClass("active")})}]);