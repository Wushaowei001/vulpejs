"use strict";var app=angular.module("app.directives",["ngAnimate"]);app.directive("shakeThat",["$animate",function(e){return{require:"^form",scope:{submit:"&",submitted:"="},link:function(n,r,t,i){r.on("submit",function(){n.$apply(function(){return i.$valid?n.submit():(n.submitted=!0,void e.addClass(r,"shake").then(function(){e.removeClass(r,"shake")}))})})}}}]),app.directive("uppercase",function(){return{require:"ngModel",link:function(e,n,r,t){var i=function(e){if(e){var n=e.toUpperCase();return n!==e&&(t.$setViewValue(n),t.$render()),n}};t.$parsers.push(i),i(e[r.ngModel])}}}),app.directive("lowercase",function(){return{require:"ngModel",link:function(e,n,r,t){var i=function(e){if(e){var n=e.toLowerCase();return n!==e&&(t.$setViewValue(n),t.$render()),n}};t.$parsers.push(i),i(e[r.ngModel])}}}),app.directive("capitalize",function(){return{require:"ngModel",link:function(e,n,r,t){var i=function(e){if(e){var n=e.split(" ");if(n.length>0){var r="";return angular.forEach(n,function(e){""!==r&&(r+=" "),r+=e.charAt(0).toUpperCase()+e.substring(1)}),r!==e&&(t.$setViewValue(r),t.$render()),r}}};t.$parsers.push(i),i(e[r.ngModel])}}}),app.directive("capitalizeFirst",function(){return{require:"ngModel",link:function(e,n,r,t){var i=function(e){if(e){var n=e.charAt(0).toUpperCase()+e.substring(1);return n!==e&&(t.$setViewValue(n),t.$render()),n}};t.$parsers.push(i),i(e[r.ngModel])}}}),app.directive("currency",function(){return{restrict:"A",require:"ngModel",link:function(e,n,r,t){var i=function(e,n){void 0===n&&(n=!1),e=e.toString(),e=e.replace(/[^0-9]/g,""),e=e.substring(0,e.length-2)+","+e.substring(e.length-2),e=e.replace(/[^0-9\,]/g,"");var r=e.split(",");return r[0]=r[0].replace(/\d{1,3}(?=(\d{3})+(?!\d))/g,"$&."),r[1]&&r[1].length>2&&(r[1]=r[1].substring(0,2)),n&&r[1]&&1===r[1].length&&(r[1]=r[1]+"0"),r.join(",")},a=function(){var e=n.val(),r=e;e&&0!==e.length&&(e=i(e),e!==r&&(n.val(e),n.triggerHandler("input")))};n.bind("keyup keydown keypress",function(e){var n=e.keyCode,r=n>47&&58>n||32===n||8===n||n>64&&91>n||n>95&&112>n||n>185&&193>n||n>218&&223>n;r&&a()}),t.$parsers.push(function(e){return e&&0!==e.length?(e=e.toString(),e=e.replace(/[^0-9]/g,"")):e}),t.$formatters.push(function(e){return e&&0!==e.length?e=i(e,!0):e})}}}),app.directive("onlyNumbers",function(){return{require:"ngModel",link:function(e,n,r,t){t.$parsers.push(function(e){if(void 0==e)return"";var n=e.replace(/[^0-9]/g,"");return n!=e&&(t.$setViewValue(n),t.$render()),n})}}}),app.directive("focusMe",["$timeout","$parse",function(e,n){return{link:function(r,t,i){var a=n(i.focusMe);r.$watch(a,function(n){n===!0&&e(function(){t[0].focus()},100)}),t.bind("blur",function(){r.$apply(a.assign(r,!1))})}}}]),app.directive("starRating",["$timeout",function(){return{restrict:"EA",template:"<ul class='rating' ng-class='{readonly: readonly}'>  <li ng-repeat='star in stars' ng-class='star' ng-click='toggle($index)'>    <i class='fa fa-star'></i>  </li></ul>",scope:{ratingValue:"=ngModel",max:"=?",onRatingSelected:"&?",readonly:"=?"},link:function(e){function n(){e.stars=[];for(var n=0,r=e.max;r>n;++n)e.stars.push({filled:n<e.ratingValue})}void 0===e.max&&(e.max=5),e.toggle=function(n){(void 0===e.readonly||e.readonly===!1)&&(e.ratingValue=n+1,e.onRatingSelected({rating:n+1}))},e.$watch("ratingValue",function(){n()}),n()}}}]);